---
created: 2025-05-30T00:30
updated: 2025-05-30T00:30
version: 1
---

# 13. ASSA í…ŒìŠ¤íŠ¸ ì „ëµ ë° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ v1.0

## 1. í…ŒìŠ¤íŠ¸ ì „ëµ ê°œìš”

### 1.1 í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

```
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  E2E í…ŒìŠ¤íŠ¸ (5%)    â”‚ â† ë¸Œë¼ìš°ì €/ì‹œë®¬ë ˆì´í„° ìë™í™”
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   í†µí•© í…ŒìŠ¤íŠ¸ (15%)         â”‚ â† API, Socket, DB ì—°ë™
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (80%)              â”‚ â† í•¨ìˆ˜, í´ë˜ìŠ¤, ì»´í¬ë„ŒíŠ¸
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 í…ŒìŠ¤íŠ¸ ì¢…ë¥˜ë³„ ëª©í‘œ

#### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)

- **ëª©í‘œ**: ê°œë³„ í•¨ìˆ˜/ë©”ì„œë“œì˜ ì •í™•ì„± ê²€ì¦
- **ë²”ìœ„**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜, ë°ì´í„° ëª¨ë¸
- **ì»¤ë²„ë¦¬ì§€**: 80% ì´ìƒ
- **ì‹¤í–‰**: ê°œë°œ ì¤‘ ì§€ì†ì  ì‹¤í–‰

#### í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)

- **ëª©í‘œ**: ì»´í¬ë„ŒíŠ¸ ê°„ ìƒí˜¸ì‘ìš© ê²€ì¦
- **ë²”ìœ„**: API ì—”ë“œí¬ì¸íŠ¸, ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™, ì†Œì¼“ í†µì‹ 
- **ì»¤ë²„ë¦¬ì§€**: ì£¼ìš” ì‚¬ìš©ì í”Œë¡œìš° 100%
- **ì‹¤í–‰**: CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œ ìë™ ì‹¤í–‰

#### E2E í…ŒìŠ¤íŠ¸ (End-to-End Tests)

- **ëª©í‘œ**: ì „ì²´ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ ê²€ì¦
- **ë²”ìœ„**: ì£¼ìš” ê¸°ëŠ¥ì˜ ì™„ì „í•œ í”Œë¡œìš°
- **ì»¤ë²„ë¦¬ì§€**: í•µì‹¬ ì‚¬ìš©ì ì—¬ì • 100%
- **ì‹¤í–‰**: ë¦´ë¦¬ìŠ¤ ì „ ì‹¤í–‰

## 2. Android ì•± í…ŒìŠ¤íŠ¸

### 2.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

#### ë°ì´í„° ëª¨ë¸ í…ŒìŠ¤íŠ¸

```java
@RunWith(JUnit4.class)
public class UserModelTest {

    @Test
    public void testUserCreation() {
        // Given
        User user = new User();
        user.setId(1L);
        user.setEmail("test@example.com");
        user.setNickname("TestUser");

        // Then
        assertEquals(1L, user.getId().longValue());
        assertEquals("test@example.com", user.getEmail());
        assertEquals("TestUser", user.getNickname());
    }

    @Test
    public void testEmailValidation() {
        // Given
        User user = new User();

        // When & Then
        assertTrue(user.isValidEmail("test@example.com"));
        assertFalse(user.isValidEmail("invalid-email"));
        assertFalse(user.isValidEmail(""));
        assertFalse(user.isValidEmail(null));
    }
}
```

#### ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸

```java
@RunWith(JUnit4.class)
public class ValidationUtilsTest {

    @Test
    public void testPasswordValidation() {
        // Strong password
        assertTrue(ValidationUtils.isValidPassword("Password123!"));

        // Weak passwords
        assertFalse(ValidationUtils.isValidPassword("123456"));
        assertFalse(ValidationUtils.isValidPassword("password"));
        assertFalse(ValidationUtils.isValidPassword("Pass1"));
    }

    @Test
    public void testNicknameValidation() {
        assertTrue(ValidationUtils.isValidNickname("ValidUser"));
        assertTrue(ValidationUtils.isValidNickname("User_123"));

        assertFalse(ValidationUtils.isValidNickname("ab")); // ë„ˆë¬´ ì§§ìŒ
        assertFalse(ValidationUtils.isValidNickname("verylongnicknamethatisinvalid")); // ë„ˆë¬´ ê¹€
        assertFalse(ValidationUtils.isValidNickname("User@123")); // íŠ¹ìˆ˜ë¬¸ì
    }
}
```

#### API ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ (Mockito ì‚¬ìš©)

```java
@RunWith(MockitoJUnitRunner.class)
public class AuthServiceTest {

    @Mock
    private ApiService apiService;

    @Mock
    private PreferenceManager preferenceManager;

    @InjectMocks
    private AuthController authController;

    @Test
    public void testLoginSuccess() {
        // Given
        LoginRequest request = new LoginRequest("test@example.com", "password123");
        ApiResponse<LoginResponse> mockResponse = new ApiResponse<>();
        mockResponse.setSuccess(true);
        mockResponse.setData(new LoginResponse("jwt_token", new User()));

        when(apiService.login(request)).thenReturn(Observable.just(mockResponse));

        // When
        TestObserver<ApiResponse<LoginResponse>> testObserver =
            authController.login(request).test();

        // Then
        testObserver.assertComplete();
        testObserver.assertValue(response -> response.isSuccess());
        verify(preferenceManager).saveJwtToken("jwt_token");
    }
}
```

### 2.2 UI í…ŒìŠ¤íŠ¸ (Espresso)

#### ë¡œê·¸ì¸ í™”ë©´ í…ŒìŠ¤íŠ¸

```java
@RunWith(AndroidJUnit4.class)
@LargeTest
public class LoginActivityTest {

    @Rule
    public ActivityTestRule<LoginActivity> activityRule =
        new ActivityTestRule<>(LoginActivity.class);

    @Test
    public void testLoginWithValidCredentials() {
        // ì´ë©”ì¼ ì…ë ¥
        onView(withId(R.id.editTextEmail))
            .perform(typeText("john@test.com"));

        // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
        onView(withId(R.id.editTextPassword))
            .perform(typeText("password123!"));

        // ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
        onView(withId(R.id.buttonLogin))
            .perform(click());

        // ê²°ê³¼ í™•ì¸
        onView(withId(R.id.textViewWelcome))
            .check(matches(isDisplayed()));
    }

    @Test
    public void testLoginWithInvalidEmail() {
        // ì˜ëª»ëœ ì´ë©”ì¼ ì…ë ¥
        onView(withId(R.id.editTextEmail))
            .perform(typeText("invalid-email"));

        onView(withId(R.id.editTextPassword))
            .perform(typeText("password123!"));

        onView(withId(R.id.buttonLogin))
            .perform(click());

        // ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
        onView(withText("ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"))
            .check(matches(isDisplayed()));
    }
}
```

### 2.3 ì†Œì¼“ í†µì‹  í…ŒìŠ¤íŠ¸

#### ì†Œì¼“ ì—°ê²° í…ŒìŠ¤íŠ¸

```java
@RunWith(JUnit4.class)
public class SocketManagerTest {

    private SocketManager socketManager;
    private MockWebServer mockServer;

    @Before
    public void setUp() throws IOException {
        mockServer = new MockWebServer();
        mockServer.start();

        socketManager = new SocketManager(
            mockServer.getHostName(),
            mockServer.getPort()
        );
    }

    @Test
    public void testConnectionSuccess() throws InterruptedException {
        // Given
        CountDownLatch latch = new CountDownLatch(1);

        socketManager.setConnectionListener(new SocketManager.ConnectionListener() {
            @Override
            public void onConnected() {
                latch.countDown();
            }

            @Override
            public void onDisconnected() {}

            @Override
            public void onError(Exception e) {}
        });

        // When
        socketManager.connect("fake_jwt_token");

        // Then
        assertTrue(latch.await(5, TimeUnit.SECONDS));
    }
}
```

## 3. Laravel ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸

### 3.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

#### ëª¨ë¸ í…ŒìŠ¤íŠ¸

```php
<?php
namespace Tests\Unit;

use Tests\TestCase;
use App\Models\User;
use App\Models\Post;

class UserModelTest extends TestCase
{
    /** @test */
    public function it_can_create_a_user()
    {
        $user = User::factory()->create([
            'email' => 'test@example.com',
            'nickname' => 'TestUser'
        ]);

        $this->assertEquals('test@example.com', $user->email);
        $this->assertEquals('TestUser', $user->nickname);
        $this->assertDatabaseHas('users', ['email' => 'test@example.com']);
    }

    /** @test */
    public function it_has_many_posts()
    {
        $user = User::factory()->create();
        $posts = Post::factory()->count(3)->create(['user_id' => $user->id]);

        $this->assertCount(3, $user->posts);
        $this->assertInstanceOf(Post::class, $user->posts->first());
    }

    /** @test */
    public function it_can_follow_other_users()
    {
        $user1 = User::factory()->create();
        $user2 = User::factory()->create();

        $user1->following()->attach($user2->id);

        $this->assertTrue($user1->following->contains($user2));
        $this->assertTrue($user2->followers->contains($user1));
    }
}
```

#### ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸

```php
<?php
namespace Tests\Unit;

use Tests\TestCase;
use App\Services\AuthService;
use App\Models\User;
use Mockery;

class AuthServiceTest extends TestCase
{
    /** @test */
    public function it_can_authenticate_user_with_valid_credentials()
    {
        $user = User::factory()->create([
            'email' => 'test@example.com',
            'password' => bcrypt('password123')
        ]);

        $authService = new AuthService();
        $result = $authService->authenticate('test@example.com', 'password123');

        $this->assertTrue($result['success']);
        $this->assertEquals($user->id, $result['user']->id);
        $this->assertNotNull($result['token']);
    }

    /** @test */
    public function it_fails_with_invalid_credentials()
    {
        $user = User::factory()->create([
            'email' => 'test@example.com',
            'password' => bcrypt('password123')
        ]);

        $authService = new AuthService();
        $result = $authService->authenticate('test@example.com', 'wrongpassword');

        $this->assertFalse($result['success']);
        $this->assertNull($result['token']);
    }
}
```

### 3.2 Feature í…ŒìŠ¤íŠ¸ (API í…ŒìŠ¤íŠ¸)

#### ì¸ì¦ API í…ŒìŠ¤íŠ¸

```php
<?php
namespace Tests\Feature;

use Tests\TestCase;
use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;

class AuthApiTest extends TestCase
{
    use RefreshDatabase;

    /** @test */
    public function user_can_register_with_valid_data()
    {
        $userData = [
            'email' => 'newuser@example.com',
            'nickname' => 'NewUser',
            'password' => 'password123!',
            'password_confirmation' => 'password123!'
        ];

        $response = $this->postJson('/api/auth/register', $userData);

        $response->assertStatus(201)
                ->assertJsonStructure([
                    'success',
                    'message',
                    'data' => [
                        'user' => ['id', 'email', 'nickname'],
                        'token'
                    ]
                ]);

        $this->assertDatabaseHas('users', [
            'email' => 'newuser@example.com',
            'nickname' => 'NewUser'
        ]);
    }

    /** @test */
    public function user_can_login_with_valid_credentials()
    {
        $user = User::factory()->create([
            'email' => 'test@example.com',
            'password' => bcrypt('password123')
        ]);

        $response = $this->postJson('/api/auth/login', [
            'email' => 'test@example.com',
            'password' => 'password123'
        ]);

        $response->assertStatus(200)
                ->assertJsonStructure([
                    'success',
                    'data' => [
                        'user',
                        'token'
                    ]
                ]);
    }

    /** @test */
    public function authenticated_user_can_access_protected_routes()
    {
        $user = User::factory()->create();
        $token = auth()->login($user);

        $response = $this->withHeaders([
            'Authorization' => 'Bearer ' . $token,
        ])->getJson('/api/user/profile');

        $response->assertStatus(200)
                ->assertJson([
                    'success' => true,
                    'data' => [
                        'id' => $user->id,
                        'email' => $user->email
                    ]
                ]);
    }
}
```

#### ê²Œì‹œë¬¼ API í…ŒìŠ¤íŠ¸

```php
<?php
namespace Tests\Feature;

use Tests\TestCase;
use App\Models\User;
use App\Models\Post;
use Illuminate\Foundation\Testing\RefreshDatabase;

class PostApiTest extends TestCase
{
    use RefreshDatabase;

    /** @test */
    public function authenticated_user_can_create_post()
    {
        $user = User::factory()->create();
        $token = auth()->login($user);

        $postData = [
            'content' => 'ìƒˆë¡œìš´ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤!'
        ];

        $response = $this->withHeaders([
            'Authorization' => 'Bearer ' . $token,
        ])->postJson('/api/posts', $postData);

        $response->assertStatus(201)
                ->assertJsonStructure([
                    'success',
                    'data' => [
                        'id',
                        'content',
                        'user_id',
                        'created_at'
                    ]
                ]);

        $this->assertDatabaseHas('posts', [
            'content' => 'ìƒˆë¡œìš´ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤!',
            'user_id' => $user->id
        ]);
    }

    /** @test */
    public function user_can_like_and_unlike_post()
    {
        $user = User::factory()->create();
        $post = Post::factory()->create();
        $token = auth()->login($user);

        // ì¢‹ì•„ìš”
        $response = $this->withHeaders([
            'Authorization' => 'Bearer ' . $token,
        ])->postJson("/api/posts/{$post->id}/like");

        $response->assertStatus(200)
                ->assertJson(['success' => true]);

        $this->assertDatabaseHas('user_post_likes', [
            'user_id' => $user->id,
            'post_id' => $post->id
        ]);

        // ì¢‹ì•„ìš” ì·¨ì†Œ
        $response = $this->withHeaders([
            'Authorization' => 'Bearer ' . $token,
        ])->deleteJson("/api/posts/{$post->id}/like");

        $response->assertStatus(200);

        $this->assertDatabaseMissing('user_post_likes', [
            'user_id' => $user->id,
            'post_id' => $post->id
        ]);
    }
}
```

## 4. Java ì†Œì¼“ ì„œë²„ í…ŒìŠ¤íŠ¸

### 4.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

#### ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ í…ŒìŠ¤íŠ¸

```java
@ExtendWith(MockitoExtension.class)
class MessageHandlerTest {

    @Mock
    private MessageDAO messageDAO;

    @Mock
    private SessionManager sessionManager;

    @InjectMocks
    private MessageHandler messageHandler;

    @Test
    void testHandleSendMessage() {
        // Given
        SocketMessage socketMessage = new SocketMessage();
        socketMessage.setAction("SEND_MESSAGE");
        socketMessage.setUserId(1L);

        Map<String, Object> data = new HashMap<>();
        data.put("chatroom_id", 1L);
        data.put("content", "ì•ˆë…•í•˜ì„¸ìš”!");
        data.put("message_type", "text");
        socketMessage.setData(data);

        Message message = new Message();
        message.setId(1001L);

        when(messageDAO.saveMessage(any(Message.class))).thenReturn(true);
        when(sessionManager.getUsersInRoom(1L)).thenReturn(Arrays.asList(1L, 2L, 3L));

        // When
        boolean result = messageHandler.handleMessage(socketMessage);

        // Then
        assertTrue(result);
        verify(messageDAO).saveMessage(any(Message.class));
        verify(sessionManager).broadcastToRoom(eq(1L), any(SocketMessage.class));
    }

    @Test
    void testHandleInvalidMessage() {
        // Given
        SocketMessage socketMessage = new SocketMessage();
        socketMessage.setAction("INVALID_ACTION");

        // When
        boolean result = messageHandler.handleMessage(socketMessage);

        // Then
        assertFalse(result);
        verify(messageDAO, never()).saveMessage(any(Message.class));
    }
}
```

#### JWT ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸

```java
class JwtUtilsTest {

    private JwtUtils jwtUtils;
    private String secretKey = "test-secret-key";

    @BeforeEach
    void setUp() {
        jwtUtils = new JwtUtils(secretKey);
    }

    @Test
    void testValidTokenValidation() {
        // Given
        String validToken = jwtUtils.generateToken(123L, "testuser@example.com");

        // When
        boolean isValid = jwtUtils.validateToken(validToken);
        Long userId = jwtUtils.getUserIdFromToken(validToken);

        // Then
        assertTrue(isValid);
        assertEquals(123L, userId);
    }

    @Test
    void testExpiredTokenValidation() {
        // Given - ë§Œë£Œëœ í† í° ì‹œë®¬ë ˆì´ì…˜
        String expiredToken = "expired.jwt.token";

        // When
        boolean isValid = jwtUtils.validateToken(expiredToken);

        // Then
        assertFalse(isValid);
    }

    @Test
    void testInvalidTokenValidation() {
        // Given
        String invalidToken = "invalid.token.format";

        // When
        boolean isValid = jwtUtils.validateToken(invalidToken);

        // Then
        assertFalse(isValid);
    }
}
```

### 4.2 í†µí•© í…ŒìŠ¤íŠ¸

#### ì†Œì¼“ ì„œë²„ í†µí•© í…ŒìŠ¤íŠ¸

```java
@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
class SocketServerIntegrationTest {

    @Autowired
    private TestRestTemplate restTemplate;

    @LocalServerPort
    private int port;

    @Test
    void testSocketConnection() throws Exception {
        // Given
        String serverUrl = "ws://localhost:" + port + "/socket";
        WebSocketStompClient stompClient = new WebSocketStompClient(new SockJsClient(
            Arrays.asList(new WebSocketTransport(new StandardWebSocketClient()))));

        StompSessionHandler sessionHandler = new MyStompSessionHandler();

        // When
        StompSession session = stompClient.connect(serverUrl, sessionHandler).get(5, TimeUnit.SECONDS);

        // Then
        assertTrue(session.isConnected());

        // Cleanup
        session.disconnect();
    }

    @Test
    void testMessageBroadcast() throws Exception {
        // Given
        CountDownLatch latch = new CountDownLatch(2);
        List<String> receivedMessages = new ArrayList<>();

        // ë‘ ê°œì˜ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°
        StompSession session1 = connectClient(latch, receivedMessages);
        StompSession session2 = connectClient(latch, receivedMessages);

        // When
        SocketMessage message = new SocketMessage();
        message.setAction("SEND_MESSAGE");
        // ... ë©”ì‹œì§€ ì„¤ì •

        session1.send("/app/message", message);

        // Then
        assertTrue(latch.await(10, TimeUnit.SECONDS));
        assertEquals(2, receivedMessages.size());
    }
}
```

## 5. í†µí•© í…ŒìŠ¤íŠ¸

### 5.1 APIì™€ ë°ì´í„°ë² ì´ìŠ¤ í†µí•©

#### ì‚¬ìš©ì í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸

```php
<?php
namespace Tests\Integration;

use Tests\TestCase;
use App\Models\User;
use Illuminate\Foundation\Testing\RefreshDatabase;

class UserFlowIntegrationTest extends TestCase
{
    use RefreshDatabase;

    /** @test */
    public function complete_user_registration_and_profile_update_flow()
    {
        // 1. íšŒì›ê°€ì…
        $registrationData = [
            'email' => 'integration@test.com',
            'nickname' => 'IntegrationUser',
            'password' => 'password123!',
            'password_confirmation' => 'password123!'
        ];

        $registerResponse = $this->postJson('/api/auth/register', $registrationData);
        $registerResponse->assertStatus(201);

        $token = $registerResponse->json('data.token');

        // 2. ë¡œê·¸ì¸ í™•ì¸
        $profileResponse = $this->withHeaders([
            'Authorization' => 'Bearer ' . $token,
        ])->getJson('/api/user/profile');

        $profileResponse->assertStatus(200)
                       ->assertJson([
                           'data' => [
                               'email' => 'integration@test.com',
                               'nickname' => 'IntegrationUser'
                           ]
                       ]);

        // 3. í”„ë¡œí•„ ì—…ë°ì´íŠ¸
        $updateData = [
            'nickname' => 'UpdatedUser',
            'introduction' => 'ì•ˆë…•í•˜ì„¸ìš”! í†µí•© í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìì…ë‹ˆë‹¤.'
        ];

        $updateResponse = $this->withHeaders([
            'Authorization' => 'Bearer ' . $token,
        ])->putJson('/api/user/profile', $updateData);

        $updateResponse->assertStatus(200);

        // 4. ì—…ë°ì´íŠ¸ í™•ì¸
        $this->assertDatabaseHas('users', [
            'email' => 'integration@test.com',
            'nickname' => 'UpdatedUser',
            'introduction' => 'ì•ˆë…•í•˜ì„¸ìš”! í†µí•© í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìì…ë‹ˆë‹¤.'
        ]);
    }
}
```

### 5.2 í¬ë¡œìŠ¤ ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸

#### Android-Laravel-Socket í†µí•© í…ŒìŠ¤íŠ¸

```java
@RunWith(AndroidJUnit4.class)
@LargeTest
public class CrossComponentIntegrationTest {

    private ApiService apiService;
    private SocketManager socketManager;

    @Before
    public void setUp() {
        apiService = ApiServiceFactory.create();
        socketManager = new SocketManager("10.0.2.2", 12345);
    }

    @Test
    public void testCompleteMessagingFlow() throws InterruptedException {
        CountDownLatch messageLatch = new CountDownLatch(1);
        String receivedMessage = "";

        // 1. APIë¥¼ í†µí•´ ë¡œê·¸ì¸
        LoginRequest loginRequest = new LoginRequest("john@test.com", "password123!");
        TestObserver<ApiResponse<LoginResponse>> loginObserver =
            apiService.login(loginRequest).test();

        loginObserver.awaitTerminalEvent();
        ApiResponse<LoginResponse> loginResponse = loginObserver.values().get(0);
        assertTrue(loginResponse.isSuccess());

        String jwtToken = loginResponse.getData().getToken();

        // 2. Socket ì—°ê²°
        socketManager.setMessageListener(new SocketManager.MessageListener() {
            @Override
            public void onMessageReceived(SocketMessage message) {
                if ("MESSAGE_RECEIVED".equals(message.getAction())) {
                    receivedMessage = message.getData().get("content").toString();
                    messageLatch.countDown();
                }
            }
        });

        socketManager.connect(jwtToken);
        Thread.sleep(2000); // ì—°ê²° ëŒ€ê¸°

        // 3. ì±„íŒ…ë°© ì°¸ì—¬ (API)
        JoinRoomRequest joinRequest = new JoinRoomRequest(1L);
        TestObserver<ApiResponse<Void>> joinObserver =
            apiService.joinChatRoom(joinRequest).test();

        joinObserver.awaitTerminalEvent();
        assertTrue(joinObserver.values().get(0).isSuccess());

        // 4. ë©”ì‹œì§€ ì „ì†¡ (Socket)
        SocketMessage sendMessage = new SocketMessage();
        sendMessage.setAction("SEND_MESSAGE");
        Map<String, Object> data = new HashMap<>();
        data.put("chatroom_id", 1L);
        data.put("content", "í†µí•© í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€");
        data.put("message_type", "text");
        sendMessage.setData(data);

        socketManager.sendMessage(sendMessage);

        // 5. ë©”ì‹œì§€ ìˆ˜ì‹  í™•ì¸
        assertTrue(messageLatch.await(10, TimeUnit.SECONDS));
        assertEquals("í†µí•© í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€", receivedMessage);

        // 6. APIë¥¼ í†µí•´ ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ í™•ì¸
        TestObserver<ApiResponse<MessageHistory>> historyObserver =
            apiService.getChatHistory(1L, 1, 20).test();

        historyObserver.awaitTerminalEvent();
        ApiResponse<MessageHistory> historyResponse = historyObserver.values().get(0);
        assertTrue(historyResponse.isSuccess());

        List<Message> messages = historyResponse.getData().getMessages();
        assertTrue(messages.stream()
                           .anyMatch(msg -> "í†µí•© í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€".equals(msg.getContent())));
    }
}
```

## 6. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

### 6.1 ë¶€í•˜ í…ŒìŠ¤íŠ¸ (JMeter/Artillery)

#### API ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì„¤ì •

```yaml
# artillery-config.yml
config:
  target: "http://localhost:8000"
  phases:
    - duration: 60
      arrivalRate: 10
    - duration: 120
      arrivalRate: 20
    - duration: 60
      arrivalRate: 50

scenarios:
  - name: "ë¡œê·¸ì¸ ë° ê²Œì‹œë¬¼ ì¡°íšŒ"
    weight: 70
    flow:
      - post:
          url: "/api/auth/login"
          json:
            email: "test@example.com"
            password: "password123"
          capture:
            - json: "$.data.token"
              as: "token"
      - get:
          url: "/api/posts"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "ê²Œì‹œë¬¼ ì‘ì„±"
    weight: 30
    flow:
      - post:
          url: "/api/auth/login"
          json:
            email: "test@example.com"
            password: "password123"
          capture:
            - json: "$.data.token"
              as: "token"
      - post:
          url: "/api/posts"
          headers:
            Authorization: "Bearer {{ token }}"
          json:
            content: "ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²Œì‹œë¬¼ {{ $randomString() }}"
```

### 6.2 ì†Œì¼“ ì„œë²„ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### ë™ì‹œ ì—°ê²° í…ŒìŠ¤íŠ¸

```java
@Test
public void testConcurrentConnections() throws InterruptedException {
    int connectionCount = 100;
    CountDownLatch latch = new CountDownLatch(connectionCount);
    List<SocketManager> connections = new ArrayList<>();

    ExecutorService executor = Executors.newFixedThreadPool(20);

    for (int i = 0; i < connectionCount; i++) {
        final int connectionId = i;
        executor.submit(() -> {
            try {
                SocketManager socket = new SocketManager("localhost", 12345);
                socket.setConnectionListener(new SocketManager.ConnectionListener() {
                    @Override
                    public void onConnected() {
                        System.out.println("Connection " + connectionId + " established");
                        latch.countDown();
                    }

                    @Override
                    public void onDisconnected() {}

                    @Override
                    public void onError(Exception e) {
                        System.err.println("Connection " + connectionId + " failed: " + e.getMessage());
                        latch.countDown();
                    }
                });

                socket.connect("test_token_" + connectionId);
                connections.add(socket);

            } catch (Exception e) {
                e.printStackTrace();
                latch.countDown();
            }
        });
    }

    assertTrue(latch.await(30, TimeUnit.SECONDS));
    assertEquals(connectionCount, connections.size());

    // ì •ë¦¬
    connections.forEach(SocketManager::disconnect);
    executor.shutdown();
}
```

## 7. E2E í…ŒìŠ¤íŠ¸

### 7.1 Android E2E í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ì™„ì „í•œ ì‚¬ìš©ì ì—¬ì • í…ŒìŠ¤íŠ¸

```java
@RunWith(AndroidJUnit4.class)
@LargeTest
public class CompleteUserJourneyTest {

    @Rule
    public ActivityTestRule<MainActivity> activityRule =
        new ActivityTestRule<>(MainActivity.class);

    @Test
    public void testCompleteUserJourney() {
        // 1. ì•± ì‹œì‘ ë° ë¡œê·¸ì¸
        onView(withId(R.id.buttonLogin))
            .perform(click());

        onView(withId(R.id.editTextEmail))
            .perform(typeText("john@test.com"));

        onView(withId(R.id.editTextPassword))
            .perform(typeText("password123!"), closeSoftKeyboard());

        onView(withId(R.id.buttonSubmitLogin))
            .perform(click());

        // ë¡œê·¸ì¸ ì™„ë£Œ ëŒ€ê¸°
        onView(withId(R.id.recyclerViewPosts))
            .check(matches(isDisplayed()));

        // 2. ê²Œì‹œë¬¼ ì‘ì„±
        onView(withId(R.id.fabCreatePost))
            .perform(click());

        onView(withId(R.id.editTextPostContent))
            .perform(typeText("E2E í…ŒìŠ¤íŠ¸ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤!"));

        onView(withId(R.id.buttonSubmitPost))
            .perform(click());

        // ê²Œì‹œë¬¼ ë“±ë¡ í™•ì¸
        onView(withText("E2E í…ŒìŠ¤íŠ¸ ê²Œì‹œë¬¼ì…ë‹ˆë‹¤!"))
            .check(matches(isDisplayed()));

        // 3. ë‹¤ë¥¸ ì‚¬ìš©ì íŒ”ë¡œìš°
        onView(withId(R.id.buttonSearch))
            .perform(click());

        onView(withId(R.id.editTextSearch))
            .perform(typeText("Alice_Kim"));

        onView(withId(R.id.buttonSearchSubmit))
            .perform(click());

        onView(withText("Alice_Kim"))
            .perform(click());

        onView(withId(R.id.buttonFollow))
            .perform(click());

        // íŒ”ë¡œìš° í™•ì¸
        onView(withId(R.id.buttonUnfollow))
            .check(matches(isDisplayed()));

        // 4. ì±„íŒ…ë°© ì°¸ì—¬
        onView(withId(R.id.tabChat))
            .perform(click());

        onView(withText("ê°œë°œì ëª¨ì„"))
            .perform(click());

        // 5. ë©”ì‹œì§€ ì „ì†¡
        onView(withId(R.id.editTextMessage))
            .perform(typeText("E2E í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤!"));

        onView(withId(R.id.buttonSendMessage))
            .perform(click());

        // ë©”ì‹œì§€ ì „ì†¡ í™•ì¸
        onView(withText("E2E í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤!"))
            .check(matches(isDisplayed()));

        // 6. ë¡œê·¸ì•„ì›ƒ
        onView(withId(R.id.menuProfile))
            .perform(click());

        onView(withId(R.id.buttonLogout))
            .perform(click());

        onView(withId(R.id.buttonConfirmLogout))
            .perform(click());

        // ë¡œê·¸ì•„ì›ƒ í™•ì¸
        onView(withId(R.id.buttonLogin))
            .check(matches(isDisplayed()));
    }
}
```

## 8. í…ŒìŠ¤íŠ¸ ìë™í™” ë° CI/CD

### 8.1 GitHub Actions ì›Œí¬í”Œë¡œìš°

#### Android í…ŒìŠ¤íŠ¸ ìë™í™”

```yaml
name: Android CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: "17"
          distribution: "temurin"

      - name: Cache Gradle packages
        uses: actions/cache@v3
        with:
          path: |
            ~/.gradle/caches
            ~/.gradle/wrapper
          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}
          restore-keys: |
            ${{ runner.os }}-gradle-

      - name: Grant execute permission for gradlew
        run: chmod +x gradlew
        working-directory: ./ASSA_Android

      - name: Run unit tests
        run: ./gradlew test
        working-directory: ./ASSA_Android

      - name: Run instrumented tests
        uses: reactivecircus/android-emulator-runner@v2
        with:
          api-level: 29
          script: ./gradlew connectedAndroidTest
          working-directory: ./ASSA_Android

      - name: Upload test reports
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: test-reports
          path: ./ASSA_Android/app/build/reports/
```

#### Laravel í…ŒìŠ¤íŠ¸ ìë™í™”

```yaml
name: Laravel CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest

    services:
      mysql:
        image: mysql:8.0
        env:
          MYSQL_ROOT_PASSWORD: root
          MYSQL_DATABASE: assa_test
        ports:
          - 3306:3306
        options: --health-cmd="mysqladmin ping" --health-interval=10s --health-timeout=5s --health-retries=3

    steps:
      - uses: actions/checkout@v3

      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: "8.2"
          extensions: mbstring, xml, ctype, iconv, intl, pdo_mysql

      - name: Cache Composer packages
        id: composer-cache
        uses: actions/cache@v3
        with:
          path: vendor
          key: ${{ runner.os }}-php-${{ hashFiles('**/composer.lock') }}
          restore-keys: |
            ${{ runner.os }}-php-

      - name: Install dependencies
        run: composer install --prefer-dist --no-progress
        working-directory: ./ASSA_Backend

      - name: Copy .env
        run: php -r "file_exists('.env') || copy('.env.testing', '.env');"
        working-directory: ./ASSA_Backend

      - name: Generate key
        run: php artisan key:generate
        working-directory: ./ASSA_Backend

      - name: Directory Permissions
        run: chmod -R 777 storage bootstrap/cache
        working-directory: ./ASSA_Backend

      - name: Run migrations
        run: php artisan migrate --force
        working-directory: ./ASSA_Backend
        env:
          DB_HOST: 127.0.0.1
          DB_PORT: 3306
          DB_DATABASE: assa_test

      - name: Execute tests
        run: vendor/bin/phpunit
        working-directory: ./ASSA_Backend
```

### 8.2 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª¨ë‹ˆí„°ë§

#### Codecov ì„¤ì •

```yaml
# codecov.yml
coverage:
  status:
    project:
      default:
        target: 80%
        threshold: 1%
    patch:
      default:
        target: 80%
        threshold: 1%

comment:
  layout: "header,diff,flags,files,footer"
  behavior: default
  require_changes: no
```

---

ğŸ’¡ **ì°¸ê³ **: ì´ í…ŒìŠ¤íŠ¸ ì „ëµì„ ë”°ë¼ êµ¬í˜„í•˜ë©´ ì•ˆì •ì ì´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
