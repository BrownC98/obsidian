---
created: 2025-05-29T23:47
updated: 2025-05-30T00:01
version: 1
---

# 3. ASSA PHP 백엔드 API 명세 v1.0

## 1. API 개요

### 1.1 기본 정보

- **Base URL**: `https://api.assa.com/api`
- **API 버전**: v1
- **인증 방식**: JWT Bearer Token
- **응답 형식**: JSON
- **문자 인코딩**: UTF-8
- **HTTP 프로토콜**: HTTPS 강제

### 1.2 공통 헤더

```http
Content-Type: application/json
Accept: application/json
Authorization: Bearer {JWT_TOKEN}
X-Requested-With: XMLHttpRequest
```

### 1.3 공통 응답 형식

#### 성공 응답

```json
{
  "success": true,
  "message": "작업이 성공적으로 완료되었습니다",
  "data": { ... },
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 100,
    "last_page": 5
  }
}
```

#### 실패 응답

```json
{
  "success": false,
  "message": "에러 메시지",
  "errors": {
    "field_name": ["validation error message"]
  },
  "error_code": "ERROR_CODE"
}
```

### 1.4 HTTP 상태 코드

- `200` OK: 성공
- `201` Created: 생성 성공
- `400` Bad Request: 잘못된 요청
- `401` Unauthorized: 인증 실패
- `403` Forbidden: 권한 없음
- `404` Not Found: 리소스 없음
- `422` Unprocessable Entity: 유효성 검증 실패
- `500` Internal Server Error: 서버 오류

## 2. 인증 API

### 2.1 회원가입

```http
POST /auth/register
```

**Request Body:**

```json
{
  "email": "user@example.com",
  "nickname": "사용자닉네임",
  "password": "password123!",
  "password_confirmation": "password123!"
}
```

**Response (201):**

```json
{
  "success": true,
  "message": "회원가입이 완료되었습니다",
  "data": {
    "user": {
      "id": 1,
      "email": "user@example.com",
      "nickname": "사용자닉네임",
      "profile_image": null,
      "introduction": null,
      "created_at": "2024-01-01T00:00:00Z"
    },
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGc...",
    "token_type": "bearer",
    "expires_in": 3600
  }
}
```

**Validation Rules:**

- `email`: required, email, unique, max:255
- `nickname`: required, string, min:2, max:20, unique
- `password`: required, string, min:8, confirmed
- `password_confirmation`: required, same:password

### 2.2 로그인

```http
POST /auth/login
```

**Request Body:**

```json
{
  "email": "user@example.com",
  "password": "password123!"
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "로그인이 완료되었습니다",
  "data": {
    "user": {
      "id": 1,
      "email": "user@example.com",
      "nickname": "사용자닉네임",
      "profile_image": "/storage/profiles/1.jpg",
      "introduction": "안녕하세요!"
    },
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGc...",
    "token_type": "bearer",
    "expires_in": 3600
  }
}
```

### 2.3 사용자 정보 조회

```http
GET /auth/me
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": {
    "id": 1,
    "email": "user@example.com",
    "nickname": "사용자닉네임",
    "profile_image": "/storage/profiles/1.jpg",
    "introduction": "안녕하세요!",
    "email_verified_at": "2024-01-01T00:00:00Z",
    "created_at": "2024-01-01T00:00:00Z"
  }
}
```

### 2.4 로그아웃

```http
GET /auth/logout
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "message": "로그아웃이 완료되었습니다"
}
```

### 2.5 토큰 갱신

```http
GET /auth/refresh
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": {
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGc...",
    "token_type": "bearer",
    "expires_in": 3600
  }
}
```

## 3. 게시물 API

### 3.1 게시물 목록 조회

```http
GET /post?page=1&per_page=20
Authorization: Bearer {token}
```

**Query Parameters:**

- `page` (integer, optional): 페이지 번호 (기본값: 1)
- `per_page` (integer, optional): 페이지당 항목 수 (기본값: 20, 최대: 100)

**Response (200):**

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "content": "게시물 내용입니다",
      "view_count": 10,
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-01T00:00:00Z",
      "user": {
        "id": 1,
        "nickname": "작성자닉네임",
        "profile_image": "/storage/profiles/1.jpg"
      },
      "files": [
        {
          "id": 1,
          "file_path": "/storage/posts/image1.jpg",
          "file_name": "image1.jpg",
          "file_order": 0
        }
      ],
      "likes_count": 5,
      "comments_count": 3,
      "is_liked": false
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 100,
    "last_page": 5
  }
}
```

### 3.2 팔로우 피드 조회

```http
GET /post/following?page=1&per_page=20
Authorization: Bearer {token}
```

**Response (200):** 게시물 목록과 동일한 형식

### 3.3 게시물 상세 조회

```http
GET /post/{id}
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": {
    "id": 1,
    "content": "게시물 내용입니다",
    "view_count": 11,
    "created_at": "2024-01-01T00:00:00Z",
    "updated_at": "2024-01-01T00:00:00Z",
    "user": {
      "id": 1,
      "nickname": "작성자닉네임",
      "profile_image": "/storage/profiles/1.jpg"
    },
    "files": [],
    "likes_count": 5,
    "comments_count": 3,
    "is_liked": false,
    "comments": [
      {
        "id": 1,
        "content": "댓글 내용",
        "is_edited": false,
        "created_at": "2024-01-01T00:00:00Z",
        "user": {
          "id": 2,
          "nickname": "댓글작성자",
          "profile_image": null
        },
        "likes_count": 1,
        "replies_count": 1,
        "is_liked": false
      }
    ]
  }
}
```

### 3.4 게시물 작성

```http
POST /post/create
Content-Type: multipart/form-data
Authorization: Bearer {token}
```

**Request Body (Form Data):**

```
content: "게시물 내용입니다"
files[]: (file) 이미지 파일 1
files[]: (file) 이미지 파일 2
```

**Response (201):**

```json
{
  "success": true,
  "message": "게시물이 작성되었습니다",
  "data": {
    "id": 1,
    "content": "게시물 내용입니다",
    "view_count": 0,
    "created_at": "2024-01-01T00:00:00Z",
    "user": {
      "id": 1,
      "nickname": "작성자닉네임",
      "profile_image": "/storage/profiles/1.jpg"
    },
    "files": [
      {
        "id": 1,
        "file_path": "/storage/posts/image1.jpg",
        "file_name": "image1.jpg",
        "file_order": 0
      }
    ]
  }
}
```

**Validation Rules:**

- `content`: required, string, max:5000
- `files`: array, max:10
- `files.*`: image, mimes:jpeg,png,jpg,gif, max:10240 (10MB)

### 3.5 게시물 수정

```http
POST /post/update
Content-Type: multipart/form-data
Authorization: Bearer {token}
```

**Request Body (Form Data):**

```
post_id: 1
content: "수정된 게시물 내용"
files[]: (file) 새 이미지 파일
remove_files[]: 1,2 (삭제할 파일 ID)
```

**Response (200):**

```json
{
  "success": true,
  "message": "게시물이 수정되었습니다",
  "data": {
    "id": 1,
    "content": "수정된 게시물 내용",
    "view_count": 10,
    "updated_at": "2024-01-01T01:00:00Z",
    "files": []
  }
}
```

### 3.6 게시물 삭제

```http
POST /post/delete
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "post_id": 1
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "게시물이 삭제되었습니다"
}
```

### 3.7 게시물 좋아요 토글

```http
POST /post/toggle-like
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "post_id": 1
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "좋아요가 추가되었습니다",
  "data": {
    "is_liked": true,
    "likes_count": 6
  }
}
```

## 4. 댓글 및 답글 API

### 4.1 댓글 작성

```http
POST /comment/create
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "post_id": 1,
  "content": "댓글 내용입니다"
}
```

**Response (201):**

```json
{
  "success": true,
  "message": "댓글이 작성되었습니다",
  "data": {
    "id": 1,
    "content": "댓글 내용입니다",
    "is_edited": false,
    "created_at": "2024-01-01T00:00:00Z",
    "user": {
      "id": 1,
      "nickname": "댓글작성자",
      "profile_image": null
    },
    "likes_count": 0,
    "replies_count": 0,
    "is_liked": false
  }
}
```

### 4.2 댓글 수정

```http
PUT /comment/update/{id}
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "content": "수정된 댓글 내용"
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "댓글이 수정되었습니다",
  "data": {
    "id": 1,
    "content": "수정된 댓글 내용",
    "is_edited": true,
    "updated_at": "2024-01-01T01:00:00Z"
  }
}
```

### 4.3 댓글 삭제

```http
DELETE /comment/delete/{id}
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "message": "댓글이 삭제되었습니다"
}
```

### 4.4 댓글 좋아요 토글

```http
POST /comment/toggle-like
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "comment_id": 1
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "좋아요가 추가되었습니다",
  "data": {
    "is_liked": true,
    "likes_count": 2
  }
}
```

### 4.5 답글 작성

```http
POST /reply/create
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "comment_id": 1,
  "content": "답글 내용입니다",
  "mentioned_user_id": 2
}
```

**Response (201):**

```json
{
  "success": true,
  "message": "답글이 작성되었습니다",
  "data": {
    "id": 1,
    "content": "답글 내용입니다",
    "mentioned_user_id": 2,
    "is_edited": false,
    "created_at": "2024-01-01T00:00:00Z",
    "user": {
      "id": 1,
      "nickname": "답글작성자",
      "profile_image": null
    },
    "mentioned_user": {
      "id": 2,
      "nickname": "멘션된사용자"
    },
    "likes_count": 0,
    "is_liked": false
  }
}
```

### 4.6 답글 목록 조회

```http
GET /reply/list/{comment_id}?page=1&per_page=10
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "content": "답글 내용입니다",
      "mentioned_user_id": 2,
      "is_edited": false,
      "created_at": "2024-01-01T00:00:00Z",
      "user": {
        "id": 1,
        "nickname": "답글작성자",
        "profile_image": null
      },
      "mentioned_user": {
        "id": 2,
        "nickname": "멘션된사용자"
      },
      "likes_count": 0,
      "is_liked": false
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 10,
    "total": 5,
    "last_page": 1
  }
}
```

## 5. 소셜 기능 API

### 5.1 팔로우

```http
POST /follow
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "user_id": 2
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "팔로우가 완료되었습니다",
  "data": {
    "is_following": true,
    "followers_count": 10,
    "following_count": 5
  }
}
```

### 5.2 언팔로우

```http
POST /unfollow
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "user_id": 2
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "언팔로우가 완료되었습니다",
  "data": {
    "is_following": false,
    "followers_count": 9,
    "following_count": 4
  }
}
```

### 5.3 팔로워 목록

```http
GET /follow/followers/{user_id}?page=1&per_page=20
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "nickname": "팔로워닉네임",
      "profile_image": "/storage/profiles/1.jpg",
      "is_following": false,
      "followed_at": "2024-01-01T00:00:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 10,
    "last_page": 1
  }
}
```

### 5.4 팔로잉 목록

```http
GET /follow/following/{user_id}?page=1&per_page=20
Authorization: Bearer {token}
```

**Response (200):** 팔로워 목록과 동일한 형식

### 5.5 친구 신청

```http
POST /friend/request
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "user_id": 2
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "친구 신청이 전송되었습니다",
  "data": {
    "friend_status": "pending"
  }
}
```

### 5.6 친구 신청 수락

```http
POST /friend/accept
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "friend_id": 1
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "친구 신청이 수락되었습니다",
  "data": {
    "friend_status": "accepted"
  }
}
```

### 5.7 친구 신청 거절

```http
POST /friend/reject
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "friend_id": 1
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "친구 신청이 거절되었습니다",
  "data": {
    "friend_status": "rejected"
  }
}
```

### 5.8 친구 목록

```http
GET /friend/list?page=1&per_page=20
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "nickname": "친구닉네임",
      "profile_image": "/storage/profiles/1.jpg",
      "friend_since": "2024-01-01T00:00:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 5,
    "last_page": 1
  }
}
```

### 5.9 사용자 차단

```http
POST /block/user
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "user_id": 2
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "사용자가 차단되었습니다",
  "data": {
    "is_blocked": true
  }
}
```

### 5.10 차단 해제

```http
POST /block/unblock
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "user_id": 2
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "차단이 해제되었습니다",
  "data": {
    "is_blocked": false
  }
}
```

### 5.11 차단 목록

```http
GET /block/list?page=1&per_page=20
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "nickname": "차단된사용자",
      "profile_image": null,
      "blocked_at": "2024-01-01T00:00:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 2,
    "last_page": 1
  }
}
```

## 6. 채팅 API

### 6.1 채팅방 생성

```http
POST /chatroom/create
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "name": "채팅방 이름",
  "description": "채팅방 설명",
  "is_open": false,
  "max_participants": 50,
  "user_ids": [2, 3, 4]
}
```

**Response (201):**

```json
{
  "success": true,
  "message": "채팅방이 생성되었습니다",
  "data": {
    "id": 1,
    "name": "채팅방 이름",
    "description": "채팅방 설명",
    "is_open": false,
    "max_participants": 50,
    "participants_count": 4,
    "created_at": "2024-01-01T00:00:00Z",
    "host": {
      "id": 1,
      "nickname": "호스트닉네임",
      "profile_image": null
    }
  }
}
```

### 6.2 내 채팅방 목록

```http
GET /chatroom/list?page=1&per_page=20
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "name": "채팅방 이름",
      "is_open": false,
      "participants_count": 4,
      "last_message": {
        "content": "마지막 메시지",
        "created_at": "2024-01-01T00:00:00Z",
        "user": {
          "nickname": "발신자"
        }
      },
      "unread_count": 3,
      "my_role": "host"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 5,
    "last_page": 1
  }
}
```

### 6.3 채팅방 초대

```http
POST /chatroom/invite
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "chat_room_id": 1,
  "user_ids": [5, 6]
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "사용자들이 초대되었습니다",
  "data": {
    "invited_users": [
      {
        "id": 5,
        "nickname": "초대된사용자1"
      },
      {
        "id": 6,
        "nickname": "초대된사용자2"
      }
    ]
  }
}
```

## 7. 알림 API

### 7.1 알림 목록 조회

```http
GET /notifications?page=1&per_page=20&type=all
Authorization: Bearer {token}
```

**Query Parameters:**

- `type` (string, optional): 알림 유형 필터 (all, post_like, comment, reply, follow, friend_request)

**Response (200):**

```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "type": "post_like",
      "title": "게시물 좋아요",
      "message": "사용자님이 회원님의 게시물을 좋아합니다",
      "data": {
        "post_id": 1,
        "user_id": 2
      },
      "is_read": false,
      "created_at": "2024-01-01T00:00:00Z"
    }
  ],
  "meta": {
    "current_page": 1,
    "per_page": 20,
    "total": 50,
    "last_page": 3,
    "unread_count": 10
  }
}
```

### 7.2 읽지 않은 알림 개수

```http
GET /notifications/unread-count
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": {
    "unread_count": 10
  }
}
```

### 7.3 알림 읽음 처리

```http
POST /notifications/mark-read
Authorization: Bearer {token}
```

**Request Body:**

```json
{
  "notification_ids": [1, 2, 3]
}
```

**Response (200):**

```json
{
  "success": true,
  "message": "알림이 읽음 처리되었습니다"
}
```

### 7.4 모든 알림 읽음 처리

```http
POST /notifications/mark-all-read
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "message": "모든 알림이 읽음 처리되었습니다"
}
```

### 7.5 알림 삭제

```http
DELETE /notifications/{id}
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "message": "알림이 삭제되었습니다"
}
```

### 7.6 읽은 알림 일괄 삭제

```http
DELETE /notifications/delete-read
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "message": "읽은 알림이 모두 삭제되었습니다",
  "data": {
    "deleted_count": 25
  }
}
```

## 8. 검색 API

### 8.1 통합 검색

```http
GET /search?q=검색어&type=all&page=1&per_page=20
Authorization: Bearer {token}
```

**Query Parameters:**

- `q` (string, required): 검색어
- `type` (string, optional): 검색 유형 (all, users, posts)
- `page` (integer, optional): 페이지 번호
- `per_page` (integer, optional): 페이지당 항목 수

**Response (200):**

```json
{
  "success": true,
  "data": {
    "users": [
      {
        "id": 1,
        "nickname": "사용자닉네임",
        "profile_image": "/storage/profiles/1.jpg",
        "is_following": false
      }
    ],
    "posts": [
      {
        "id": 1,
        "content": "게시물 내용 중 검색어가 포함된...",
        "created_at": "2024-01-01T00:00:00Z",
        "user": {
          "id": 1,
          "nickname": "작성자닉네임",
          "profile_image": null
        },
        "likes_count": 5,
        "comments_count": 3
      }
    ]
  },
  "meta": {
    "query": "검색어",
    "users_count": 5,
    "posts_count": 10
  }
}
```

## 9. 파일 관리 API

### 9.1 파일 업로드

```http
POST /uploadFiles
Content-Type: multipart/form-data
Authorization: Bearer {token}
```

**Request Body (Form Data):**

```
files[]: (file) 업로드할 파일 1
files[]: (file) 업로드할 파일 2
type: post (post|profile|message)
```

**Response (200):**

```json
{
  "success": true,
  "message": "파일 업로드가 완료되었습니다",
  "data": [
    {
      "original_name": "image1.jpg",
      "file_path": "/storage/posts/2024/01/abc123.jpg",
      "file_size": 102400,
      "mime_type": "image/jpeg"
    }
  ]
}
```

**Validation Rules:**

- `files`: required, array, max:10
- `files.*`: file, mimes:jpeg,png,jpg,gif,mp4,mov, max:50240 (50MB)
- `type`: required, in:post,profile,message

## 10. 사용자 프로필 API

### 10.1 프로필 조회

```http
GET /user/profile/{user_id}
Authorization: Bearer {token}
```

**Response (200):**

```json
{
  "success": true,
  "data": {
    "id": 1,
    "nickname": "사용자닉네임",
    "profile_image": "/storage/profiles/1.jpg",
    "introduction": "안녕하세요!",
    "created_at": "2024-01-01T00:00:00Z",
    "posts_count": 25,
    "followers_count": 100,
    "following_count": 50,
    "is_following": false,
    "friend_status": "none",
    "is_blocked": false,
    "posts": [
      {
        "id": 1,
        "content": "게시물 내용",
        "view_count": 10,
        "created_at": "2024-01-01T00:00:00Z",
        "files": [],
        "likes_count": 5,
        "comments_count": 3
      }
    ]
  }
}
```

### 10.2 프로필 수정

```http
POST /user/profile/update
Content-Type: multipart/form-data
Authorization: Bearer {token}
```

**Request Body (Form Data):**

```
nickname: "새로운닉네임"
introduction: "수정된 자기소개"
profile_image: (file) 새 프로필 이미지
remove_profile_image: false
```

**Response (200):**

```json
{
  "success": true,
  "message": "프로필이 수정되었습니다",
  "data": {
    "id": 1,
    "nickname": "새로운닉네임",
    "profile_image": "/storage/profiles/new_1.jpg",
    "introduction": "수정된 자기소개"
  }
}
```

## 11. 에러 코드 정의

### 11.1 인증 관련

- `AUTH_INVALID_CREDENTIALS`: 잘못된 로그인 정보
- `AUTH_TOKEN_EXPIRED`: 토큰 만료
- `AUTH_TOKEN_INVALID`: 유효하지 않은 토큰
- `AUTH_EMAIL_NOT_VERIFIED`: 이메일 인증 필요

### 11.2 권한 관련

- `PERMISSION_DENIED`: 권한 없음
- `RESOURCE_NOT_FOUND`: 리소스 없음
- `RESOURCE_ALREADY_EXISTS`: 중복 리소스

### 11.3 비즈니스 로직

- `SELF_ACTION_NOT_ALLOWED`: 자기 자신에 대한 액션 불가
- `BLOCKED_USER_ACTION`: 차단된 사용자와의 상호작용 불가
- `CHATROOM_FULL`: 채팅방 인원 초과

### 11.4 파일 관련

- `FILE_TOO_LARGE`: 파일 크기 초과
- `INVALID_FILE_TYPE`: 지원하지 않는 파일 형식
- `FILE_UPLOAD_FAILED`: 파일 업로드 실패

---

본 API 명세는 ASSA PHP 백엔드의 모든 엔드포인트와 데이터 형식을 정의하며, 모든 클라이언트가 동일한 형식으로 통신해야 합니다.
