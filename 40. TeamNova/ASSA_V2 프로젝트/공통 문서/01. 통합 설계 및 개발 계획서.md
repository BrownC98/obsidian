---
created: 2025-05-29T23:45
updated: 2025-05-30T00:01
version: 1
---

# 1. ASSA 통합 설계 및 개발 계획서 v1.0

## 1. 프로젝트 개요

### 1.1 프로젝트명

ASSA (Advanced Social & Streaming Application) - 차세대 소셜 네트워킹 플랫폼

### 1.2 프로젝트 비전

실시간 채팅, 영상통화, 소셜 미디어 기능을 통합한 종합적인 커뮤니케이션 플랫폼을 구축하여, 사용자 간 원활한 소통과 연결을 제공하는 것을 목표로 합니다.

### 1.3 프로젝트 목표

- **통합 커뮤니케이션**: 텍스트, 이미지, 영상을 통한 다양한 소통 방식 제공
- **실시간 상호작용**: 지연 없는 실시간 메시징 및 영상통화
- **소셜 네트워킹**: 팔로우, 친구, 게시물 공유를 통한 소셜 네트워크 구축
- **확장 가능한 아키텍처**: 사용자 증가에 대응할 수 있는 확장성 확보

### 1.4 핵심 기능

- 실시간 채팅 및 그룹 채팅
- WebRTC 기반 다자간 영상통화
- 소셜 미디어 (게시물, 댓글, 좋아요)
- 팔로우/친구 시스템
- 실시간 알림 시스템
- 사용자 차단 및 보안 기능

## 2. 시스템 아키텍처

### 2.1 전체 시스템 구성

```
[Android Client] ←→ [Laravel API Server] ←→ [MySQL Database]
       ↓               ↓
[Java Socket Server] ←→ [WebRTC P2P]
```

### 2.2 컴포넌트별 역할

#### 2.2.1 Android 클라이언트

- **역할**: 사용자 인터페이스 및 클라이언트 로직
- **기술**: Android Native (Java), MVC 패턴
- **책임**:
  - 사용자 인증 및 계정 관리
  - 게시물 및 소셜 미디어 기능
  - 실시간 채팅 UI
  - WebRTC 영상통화 클라이언트
  - 로컬 데이터 저장 (SQLite)

#### 2.2.2 Laravel PHP 백엔드

- **역할**: RESTful API 서버 및 비즈니스 로직
- **기술**: Laravel 11.9, PHP 8.2+, JWT 인증
- **책임**:
  - 사용자 인증 및 권한 관리
  - 게시물, 댓글, 좋아요 관리
  - 팔로우/친구/차단 시스템
  - 알림 시스템
  - 파일 업로드 및 관리
  - 채팅방 메타데이터 관리

#### 2.2.3 Java 실시간 소켓 서버

- **역할**: 실시간 메시징 및 WebRTC 시그널링
- **기술**: Java 20, Socket Programming, Maven
- **책임**:
  - TCP 소켓 기반 실시간 메시징
  - 채팅방 관리 및 메시지 브로드캐스팅
  - WebRTC 시그널링 (SDP, ICE Candidate)
  - 영상회의 방 관리
  - 실시간 세션 관리

#### 2.2.4 MySQL 데이터베이스

- **역할**: 통합 데이터 저장소
- **기술**: MySQL 8.x
- **책임**:
  - 사용자 정보 및 인증 데이터
  - 게시물, 댓글, 좋아요 데이터
  - 채팅방 및 메시지 데이터
  - 관계 데이터 (팔로우, 친구, 차단)
  - 알림 및 설정 데이터

### 2.3 데이터 플로우

#### 2.3.1 HTTP API 통신

```
Android Client ←→ Laravel Backend ←→ MySQL Database
```

#### 2.3.2 실시간 메시징

```
Android Client ←→ Java Socket Server ←→ MySQL Database
```

#### 2.3.3 WebRTC 영상통화

```
Android Client A ←→ Java Socket Server (시그널링) ←→ Android Client B
        ↓                                                    ↓
        └────────────── WebRTC P2P Connection ──────────────┘
```

## 3. 기술 스택

### 3.1 프론트엔드 (Android)

- **언어**: Java
- **플랫폼**: Android Native (API 21+)
- **아키텍처**: MVC 패턴
- **UI**: Material Design Components
- **네트워킹**: Retrofit2, OkHttp
- **이미지**: Glide
- **JSON**: Gson
- **실시간 통신**: Java Socket, WebRTC
- **로컬 DB**: SQLite
- **소셜 로그인**: Kakao SDK

### 3.2 백엔드 (PHP)

- **프레임워크**: Laravel 11.9
- **언어**: PHP 8.2+
- **인증**: JWT (tymon/jwt-auth 2.1)
- **개발도구**: Laravel Telescope 5.0, Laravel Sanctum 4.0
- **캐싱**: Laravel Cache
- **이벤트**: Laravel Event System
- **큐**: Laravel Queue
- **파일저장**: Laravel Storage

### 3.3 실시간 서버 (Java)

- **언어**: Java 20
- **빌드도구**: Maven 3.x
- **로깅**: Apache Log4j2 2.24.3
- **JSON**: Google Gson 2.13.1
- **동시성**: ConcurrentHashMap, CopyOnWriteArrayList
- **네트워킹**: Java Socket Programming
- **데이터베이스**: JDBC

### 3.4 데이터베이스 및 인프라

- **주 데이터베이스**: MySQL 8.x
- **통신 프로토콜**: HTTPS, WSS, TCP Socket
- **인증 방식**: JWT Bearer Token
- **파일 저장**: 로컬/클라우드 스토리지

## 4. 주요 데이터 모델

### 4.1 사용자 관련 모델

```
User {
  id: Long
  email: String (unique)
  nickname: String (unique)
  password: String (hashed)
  profile_image: String (nullable)
  introduction: String (nullable)
  email_verified_at: Timestamp
  created_at: Timestamp
  updated_at: Timestamp
  deleted_at: Timestamp (nullable)
}
```

### 4.2 게시물 관련 모델

```
Post {
  id: Long
  user_id: Long (FK)
  content: Text
  view_count: Integer (default: 0)
  created_at: Timestamp
  updated_at: Timestamp
  deleted_at: Timestamp (nullable)
}

Comment {
  id: Long
  post_id: Long (FK)
  user_id: Long (FK)
  content: Text
  is_edited: Boolean (default: false)
  created_at: Timestamp
  updated_at: Timestamp
  deleted_at: Timestamp (nullable)
}

Reply {
  id: Long
  comment_id: Long (FK)
  user_id: Long (FK)
  content: Text
  mentioned_user_id: Long (FK, nullable)
  is_edited: Boolean (default: false)
  created_at: Timestamp
  updated_at: Timestamp
  deleted_at: Timestamp (nullable)
}
```

### 4.3 채팅 관련 모델

```
ChatRoom {
  id: Long
  name: String
  description: Text (nullable)
  host_user_id: Long (FK)
  is_open: Boolean (default: false)
  created_at: Timestamp
  updated_at: Timestamp
  deleted_at: Timestamp (nullable)
}

Message {
  id: Long
  chat_room_id: Long (FK)
  user_id: Long (FK)
  content: Text
  message_type: Enum (TEXT, IMAGE, SYSTEM)
  created_at: Timestamp
  updated_at: Timestamp
  deleted_at: Timestamp (nullable)
}
```

### 4.4 관계 모델

```
Follow {
  id: Long
  follower_id: Long (FK)
  followed_id: Long (FK)
  created_at: Timestamp
}

Friend {
  id: Long
  requester_id: Long (FK)
  addressee_id: Long (FK)
  status: Enum (PENDING, ACCEPTED, REJECTED)
  created_at: Timestamp
  updated_at: Timestamp
}

BlockedUser {
  id: Long
  blocker_id: Long (FK)
  blocked_id: Long (FK)
  created_at: Timestamp
}
```

## 5. API 명세 개요

### 5.1 인증 API

- `POST /api/auth/register` - 회원가입
- `POST /api/auth/login` - 로그인
- `GET /api/auth/me` - 사용자 정보 조회
- `POST /api/auth/logout` - 로그아웃
- `POST /api/auth/refresh` - 토큰 갱신

### 5.2 게시물 API

- `GET /api/post` - 게시물 목록 (페이지네이션)
- `GET /api/post/following` - 팔로우 피드
- `GET /api/post/{id}` - 게시물 상세
- `POST /api/post/create` - 게시물 작성
- `PUT /api/post/update/{id}` - 게시물 수정
- `DELETE /api/post/delete/{id}` - 게시물 삭제
- `POST /api/post/toggle-like` - 좋아요 토글

### 5.3 소셜 기능 API

- `POST /api/follow` - 팔로우
- `POST /api/unfollow` - 언팔로우
- `POST /api/friend/request` - 친구 신청
- `POST /api/friend/accept` - 친구 수락
- `POST /api/friend/reject` - 친구 거절
- `POST /api/block/user` - 사용자 차단
- `POST /api/block/unblock` - 차단 해제

### 5.4 채팅 API

- `POST /api/chatroom/create` - 채팅방 생성
- `GET /api/chatroom/list` - 내 채팅방 목록
- `POST /api/chatroom/invite` - 채팅방 초대

## 6. 소켓 메시지 프로토콜

### 6.1 공통 메시지 구조

```json
{
  "action": "ACTION_TYPE",
  "data": { ... },
  "timestamp": "2024-01-01T12:00:00Z",
  "seq_id": "unique_sequence_id"
}
```

### 6.2 주요 액션 타입

- **CONNECT**: 사용자 연결 및 인증
- **CREATE_ROOM**: 채팅방 생성
- **JOIN_ROOM**: 채팅방 참가
- **EXIT_ROOM**: 채팅방 퇴장
- **SEND_MESSAGE**: 메시지 전송
- **INVITE**: 사용자 초대
- **CREATE_VIDEO_ROOM**: 영상회의 방 생성
- **JOIN_VIDEO_ROOM**: 영상회의 참가
- **SDP**: WebRTC SDP 교환
- **ICE_CANDIDATE**: WebRTC ICE 후보 교환
- **MEDIA_STATUS**: 미디어 상태 변경

## 7. 개발 단계 및 우선순위

### 7.1 Phase 1: MVP (4주)

**목표**: 기본적인 소셜 미디어 및 채팅 기능 구현

#### 주요 기능

- 사용자 인증 (회원가입, 로그인, JWT)
- 기본 게시물 시스템 (CRUD, 좋아요)
- 1:1 실시간 채팅
- 기본 팔로우 시스템

#### 각 팀 우선 작업

- **Android**: 인증 UI, 게시물 목록/상세, 기본 채팅 UI
- **Laravel**: 인증 API, 게시물 API, 기본 사용자 관리 API
- **Java Socket**: 기본 소켓 연결, 1:1 메시징, 사용자 세션 관리

### 7.2 Phase 2: 확장 기능 (3주)

**목표**: 고급 소셜 기능 및 그룹 채팅

#### 주요 기능

- 댓글 및 답글 시스템
- 그룹 채팅 및 오픈 채팅
- 친구 시스템
- 기본 알림 시스템
- 사용자 차단 기능

#### 각 팀 작업

- **Android**: 댓글 UI, 그룹 채팅 UI, 친구 관리 UI
- **Laravel**: 댓글/답글 API, 친구 시스템 API, 기본 알림 API
- **Java Socket**: 그룹 채팅, 채팅방 관리, 오프라인 사용자 처리

### 7.3 Phase 3: 고급 기능 (4주)

**목표**: WebRTC 영상통화 및 고급 기능

#### 주요 기능

- WebRTC 기반 영상통화
- 다자간 영상회의
- 고급 알림 시스템
- 검색 기능
- 파일 공유 기능

#### 각 팀 작업

- **Android**: WebRTC 구현, 영상통화 UI, 멀티미디어 처리
- **Laravel**: 고급 알림 API, 검색 API, 파일 관리 API
- **Java Socket**: WebRTC 시그널링, 영상회의 방 관리

### 7.4 Phase 4: 최적화 및 배포 (2주)

**목표**: 성능 최적화 및 배포 준비

#### 주요 작업

- 성능 최적화
- 보안 강화
- 테스트 및 버그 수정
- 배포 환경 구성
- 모니터링 시스템 구축

## 8. 개발 원칙 및 가이드라인

### 8.1 공통 개발 원칙

- **TDD (Test-Driven Development)**: 테스트 우선 개발
- **DRY (Don't Repeat Yourself)**: 코드 중복 최소화
- **SOLID 원칙**: 객체지향 설계 원칙 준수
- **Clean Code**: 가독성 높은 코드 작성
- **문서화**: 모든 API 및 주요 기능 문서화

### 8.2 Git 커밋 컨벤션

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type**: feat, fix, docs, style, refactor, test, chore
**예시**: `feat(auth): JWT 토큰 갱신 기능 추가`

### 8.3 코딩 스타일

- **Java**: Google Java Style Guide
- **PHP**: PSR-12 Extended Coding Style
- **변수명**: camelCase (Java), snake_case (PHP/DB)
- **상수명**: UPPER_SNAKE_CASE
- **클래스명**: PascalCase

### 8.4 에러 처리 전략

- **HTTP API**: 표준 HTTP 상태 코드 사용
- **소켓**: JSON 형태의 에러 응답
- **로깅**: 구조화된 로그 (JSON 형태)
- **예외 처리**: 각 언어별 표준 예외 처리 패턴 사용

## 9. 보안 및 성능 요구사항

### 9.1 보안 요구사항

- **인증**: JWT Bearer Token 기반 인증
- **권한**: Role-based Access Control (RBAC)
- **데이터 암호화**: HTTPS/WSS 통신 강제
- **입력 검증**: 모든 사용자 입력 검증 및 Sanitization
- **SQL 인젝션 방지**: PreparedStatement 사용
- **XSS 방지**: 출력 시 HTML 이스케이프

### 9.2 성능 요구사항

- **API 응답시간**: 평균 200ms 이하
- **실시간 메시징**: 지연시간 100ms 이하
- **동시 접속자**: 1000명 이상 지원
- **데이터베이스**: 쿼리 최적화 및 인덱싱
- **캐싱**: Redis 또는 Memcached 활용 (추후)

### 9.3 확장성 고려사항

- **로드 밸런싱**: 다중 서버 환경 대비
- **데이터베이스 샤딩**: 대용량 데이터 처리 대비
- **마이크로서비스**: 기능별 서비스 분리 가능성
- **CDN**: 정적 파일 전송 최적화

## 10. 모니터링 및 운영

### 10.1 로깅 전략

- **구조화된 로깅**: JSON 형태의 로그
- **로그 레벨**: DEBUG, INFO, WARN, ERROR, FATAL
- **성능 로그**: 응답시간, 처리량, 에러율
- **보안 로그**: 인증 실패, 권한 위반, 비정상 접근

### 10.2 모니터링 지표

- **시스템 지표**: CPU, 메모리, 디스크, 네트워크
- **애플리케이션 지표**: 응답시간, 처리량, 에러율
- **비즈니스 지표**: 활성 사용자, 메시지 수, 영상통화 시간

### 10.3 알림 정책

- **장애 알림**: 서버 다운, DB 연결 실패
- **성능 알림**: 응답시간 임계값 초과
- **보안 알림**: 비정상적인 접근 패턴

## 11. 향후 확장 계획

### 11.1 단기 확장 (6개월)

- 푸시 알림 시스템 고도화
- 이미지/동영상 처리 최적화
- 다국어 지원
- 고급 검색 기능 (ElasticSearch)

### 11.2 중기 확장 (1년)

- AI 기반 콘텐츠 추천
- 라이브 스트리밍 기능
- 결제 시스템 연동
- 광고 시스템

### 11.3 장기 확장 (2년)

- 크로스 플랫폼 지원 (iOS, Web)
- AR/VR 기능 통합
- 블록체인 기반 디지털 자산
- 글로벌 서비스 확장

---

본 문서는 ASSA 프로젝트의 전체 개발 방향성과 기술적 사양을 정의하는 마스터 문서입니다. 모든 개발팀은 이 문서를 기준으로 일관성 있는 개발을 진행해야 합니다.
