---
created: 2025-05-29T23:37
updated: 2025-05-29T23:37
---
# ASSA_PHP 프로젝트 요건 정의서 (역추출)

## 1. 프로젝트 개요

### 1.1 프로젝트 명
ASSA (소셜 네트워킹 플랫폼)

### 1.2 개발 환경
- **백엔드**: Laravel 11.9 (PHP 8.2+)
- **인증**: JWT (tymon/jwt-auth 2.1)
- **개발도구**: Laravel Telescope 5.0, Laravel Sanctum 4.0
- **데이터베이스**: MySQL (마이그레이션 기반)

### 1.3 프로젝트 목적
사용자 간 소셜 네트워킹을 지원하는 플랫폼으로, 게시물 공유, 팔로우, 친구 관계, 실시간 채팅, 알림 시스템을 제공하는 종합적인 소셜 미디어 서비스

## 2. 기능별 요구사항

### 2.1 사용자 인증 및 계정 관리

#### 2.1.1 회원가입
- **일반 회원가입**: 이메일, 비밀번호, 닉네임 입력
- **소셜 회원가입**: OAuth를 통한 소셜 로그인 지원
- **필수 정보**: 이메일, 닉네임
- **약관 동의**: 회원가입 시 약관 동의 필수
- **프로필 이미지**: 기본 프로필 이미지 자동 설정

#### 2.1.2 로그인/로그아웃
- **일반 로그인**: 이메일/비밀번호 기반
- **소셜 로그인**: OAuth 인증 지원
- **자동 로그인**: JWT 토큰 기반 자동 로그인
- **토큰 갱신**: JWT 토큰 리프레시 기능
- **로그아웃**: 토큰 무효화

#### 2.1.3 계정 관리
- **프로필 수정**: 닉네임, 프로필 이미지, 자기소개 수정
- **비밀번호 변경**: 기존 비밀번호 확인 후 변경
- **비밀번호 재설정**: 이메일 인증을 통한 비밀번호 재설정
- **계정 삭제**: 사용자 요청 시 계정 완전 삭제
- **중복 검사**: 이메일, 닉네임 중복 확인

### 2.2 게시물 관리

#### 2.2.1 게시물 작성
- **텍스트 게시물**: 내용 작성 및 게시
- **이미지 첨부**: 다중 이미지 업로드 지원
- **게시물 생성 이벤트**: 게시물 생성 시 알림 이벤트 발생

#### 2.2.2 게시물 조회
- **전체 게시물 목록**: 최신순 정렬, 페이지네이션
- **팔로우 피드**: 팔로우한 사용자들의 게시물만 조회
- **게시물 상세**: 댓글, 답글 포함한 상세 정보
- **조회수**: 게시물 조회 시 자동 카운트 증가

#### 2.2.3 게시물 상호작용
- **좋아요**: 게시물 좋아요/취소 토글
- **좋아요 수**: 실시간 좋아요 개수 표시

#### 2.2.4 게시물 편집/삭제
- **내용 수정**: 작성자만 게시물 내용 수정 가능
- **첨부 파일 관리**: 이미지 추가/제거
- **게시물 삭제**: 작성자만 삭제 가능, 첨부 파일도 함께 삭제

### 2.3 댓글 및 답글 시스템

#### 2.3.1 댓글 기능
- **댓글 작성**: 게시물에 댓글 작성
- **댓글 수정**: 작성자만 수정 가능, 수정 표시
- **댓글 삭제**: 작성자만 삭제 가능
- **댓글 좋아요**: 댓글에 대한 좋아요 기능
- **댓글 생성 이벤트**: 댓글 작성 시 알림 이벤트

#### 2.3.2 답글 기능
- **답글 작성**: 댓글에 대한 답글 작성
- **답글 수정**: 작성자만 수정 가능
- **답글 삭제**: 작성자만 삭제 가능
- **답글 좋아요**: 답글에 대한 좋아요 기능
- **멘션 기능**: 답글에서 다른 사용자 멘션 지원
- **답글 목록**: 댓글별 답글 목록 조회
- **답글 생성 이벤트**: 답글 작성 시 알림 이벤트

### 2.4 팔로우 시스템

#### 2.4.1 팔로우 관계
- **팔로우**: 다른 사용자 팔로우
- **언팔로우**: 팔로우 관계 해제
- **팔로워/팔로잉 목록**: 상호 팔로우 관계 조회

#### 2.4.2 팔로우 알림 설정
- **개별 알림 설정**: 팔로우한 사용자별 알림 설정
- **전체 알림 설정**: 모든 팔로우 사용자 일괄 설정
- **알림 종류**: 게시물, 댓글, 답글, 좋아요 등 세분화

### 2.5 친구 시스템

#### 2.5.1 친구 신청
- **친구 요청**: 다른 사용자에게 친구 신청
- **요청 취소**: 보낸 친구 신청 취소
- **요청 목록**: 받은/보낸 친구 신청 목록

#### 2.5.2 친구 관리
- **요청 수락**: 받은 친구 신청 수락
- **요청 거절**: 받은 친구 신청 거절
- **친구 해제**: 기존 친구 관계 해제
- **친구 목록**: 현재 친구 목록 조회
- **친구 상태**: 사용자 간 친구 관계 상태 확인

### 2.6 차단 시스템

#### 2.6.1 사용자 차단
- **차단 기능**: 특정 사용자 차단
- **차단 해제**: 차단된 사용자 해제
- **차단 목록**: 내가 차단한 사용자 목록
- **차단 상태**: 두 사용자 간 차단 관계 확인

#### 2.6.2 차단 효과
- **친구 관계 해제**: 차단 시 기존 친구 관계 자동 제거
- **채팅 제한**: 차단된 사용자와 채팅방 생성 불가
- **자기 차단 방지**: 본인을 차단하는 것 방지

### 2.7 실시간 채팅

#### 2.7.1 채팅방 관리
- **채팅방 생성**: 사용자가 새 채팅방 생성
- **채팅방 정보**: 제목, 설명 등 기본 정보
- **참여자 관리**: 채팅방 호스트 및 멤버 관리
- **내 채팅방 목록**: 참여 중인 채팅방 목록

#### 2.7.2 외부 연동
- **소켓 서버 연동**: Node.js 소켓 서버와 HTTP 통신
- **실시간 메시징**: 소켓 서버를 통한 실시간 메시지 전송

### 2.8 알림 시스템

#### 2.8.1 알림 생성
- **게시물 알림**: 새 게시물 작성 시
- **댓글 알림**: 댓글 작성 시
- **답글 알림**: 답글 작성 시
- **좋아요 알림**: 좋아요 받을 시
- **팔로우 알림**: 새로운 팔로워 시

#### 2.8.2 알림 관리
- **알림 목록**: 받은 알림 목록 조회 (페이지네이션)
- **읽지 않은 개수**: 읽지 않은 알림 개수
- **읽음 처리**: 개별/전체 알림 읽음 표시
- **알림 삭제**: 개별 알림 삭제
- **읽은 알림 일괄 삭제**: 읽은 알림 모두 삭제
- **알림 필터링**: 알림 종류별 필터링

#### 2.8.3 알림 설정
- **기본 알림 설정**: 알림 종류별 수신 설정
- **팔로우 알림 설정**: 팔로우한 사용자별 세부 설정

### 2.9 검색 기능

#### 2.9.1 통합 검색
- **사용자 검색**: 닉네임, 이메일 기반 사용자 검색
- **게시물 검색**: 게시물 내용 기반 검색
- **검색 결과**: 통합 검색 결과 제공

### 2.10 파일 관리

#### 2.10.1 파일 업로드
- **이미지 업로드**: 프로필 이미지, 게시물 이미지 업로드
- **다중 파일**: 여러 파일 동시 업로드 지원
- **파일 관리**: 업로드된 파일 자동 관리

#### 2.10.2 파일 삭제
- **자동 삭제**: 게시물/댓글 삭제 시 첨부 파일 자동 삭제
- **저장소 관리**: Laravel Storage를 통한 파일 관리

### 2.11 이메일 시스템

#### 2.11.1 인증 이메일
- **이메일 발송**: 회원가입, 비밀번호 재설정 등 인증 이메일
- **이메일 검증**: 이메일 주소 유효성 확인

## 3. 기술적 요구사항

### 3.1 보안
- **JWT 인증**: 무상태 토큰 기반 인증
- **비밀번호 해싱**: Laravel의 Hash 파사드 사용
- **CORS 처리**: API 접근 제어
- **입력 검증**: Request Validation을 통한 데이터 검증

### 3.2 성능
- **페이지네이션**: 대용량 데이터 처리를 위한 페이지네이션
- **이거 로딩**: 관련 데이터 즉시 로딩으로 N+1 문제 해결
- **캐싱**: Laravel 캐시 시스템 활용

### 3.3 확장성
- **이벤트 시스템**: 느슨한 결합을 위한 이벤트 기반 아키텍처
- **서비스 레이어**: 비즈니스 로직 분리
- **정책 기반 권한**: Laravel Policy를 통한 권한 관리

### 3.4 모니터링
- **디버깅**: Laravel Telescope를 통한 애플리케이션 모니터링
- **로깅**: 애플리케이션 로그 관리
- **에러 처리**: 체계적인 에러 응답 처리

## 4. 데이터베이스 설계

### 4.1 주요 테이블
- **users**: 사용자 정보
- **oauths**: 소셜 로그인 정보
- **posts**: 게시물
- **comments**: 댓글
- **replies**: 답글
- **follows**: 팔로우 관계
- **friends**: 친구 관계
- **blocked_users**: 차단 관계
- **chat_rooms**: 채팅방
- **user_chatroom_map**: 채팅방 참여자 매핑
- **notifications**: 알림
- **follow_notification_settings**: 팔로우 알림 설정
- **좋아요 테이블들**: user_post_likes, user_comment_likes, user_reply_likes

### 4.2 관계 설계
- **1:N 관계**: User-Post, Post-Comment, Comment-Reply
- **N:M 관계**: User-User (Follow, Friend, Block), User-ChatRoom
- **소프트 삭제**: deleted_at 컬럼을 통한 논리적 삭제

## 5. API 설계

### 5.1 인증 API
- `POST /api/auth/register` - 회원가입
- `POST /api/auth/login` - 로그인
- `GET /api/auth/me` - 내 정보 조회
- `GET /api/auth/logout` - 로그아웃
- `GET /api/auth/refresh` - 토큰 갱신

### 5.2 게시물 API
- `GET /api/post` - 게시물 목록
- `GET /api/post/following` - 팔로우 피드
- `GET /api/post/{id}` - 게시물 상세
- `POST /api/post/create` - 게시물 작성
- `POST /api/post/update` - 게시물 수정
- `POST /api/post/delete` - 게시물 삭제
- `POST /api/post/toggle-like` - 좋아요 토글

### 5.3 댓글/답글 API
- `POST /api/comment/create` - 댓글 작성
- `PUT /api/comment/update/{id}` - 댓글 수정
- `DELETE /api/comment/delete/{id}` - 댓글 삭제
- `POST /api/reply/create` - 답글 작성
- `PUT /api/reply/update/{id}` - 답글 수정
- `DELETE /api/reply/delete/{id}` - 답글 삭제
- `GET /api/reply/list/{comment_id}` - 답글 목록

### 5.4 소셜 기능 API
- `POST /api/follow` - 팔로우
- `POST /api/unfollow` - 언팔로우
- `POST /api/friend/request` - 친구 신청
- `POST /api/friend/accept` - 친구 수락
- `POST /api/friend/reject` - 친구 거절
- `POST /api/block/user` - 사용자 차단
- `POST /api/block/unblock` - 차단 해제

### 5.5 기타 API
- `GET /api/search` - 통합 검색
- `POST /api/uploadFiles` - 파일 업로드
- `GET /api/notifications` - 알림 목록
- `POST /api/chatroom/create` - 채팅방 생성

## 6. 외부 연동

### 6.1 채팅 서버
- **Node.js 소켓 서버**: 실시간 채팅을 위한 별도 서버
- **HTTP 통신**: Laravel과 소켓 서버 간 HTTP API 통신
- **채팅방 생성 연동**: 채팅방 생성 시 소켓 서버에 알림

### 6.2 이메일 서비스
- **SMTP 연동**: 이메일 발송을 위한 SMTP 설정
- **인증 이메일**: 회원가입, 비밀번호 재설정 이메일

## 7. 제약사항 및 비즈니스 규칙

### 7.1 사용자 제약
- 자기 자신을 팔로우/차단할 수 없음
- 차단된 사용자와는 채팅방 생성 불가
- 차단 시 기존 친구 관계 자동 해제

### 7.2 권한 제약
- 본인 작성 게시물/댓글만 수정/삭제 가능
- 인증된 사용자만 API 접근 가능

### 7.3 데이터 제약
- 이메일, 닉네임 중복 불가
- 최소 비밀번호 길이 8자
- 게시물 내용 필수

이 요건 정의서는 ASSA_PHP 프로젝트의 실제 구현된 코드를 분석하여 역으로 추출한 것으로, 현재 구현된 모든 기능과 제약사항을 포함하고 있습니다. 